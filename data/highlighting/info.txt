State entries are arrays where the first argument is either a
command (beginning with "#") or a regular expression to which
a rule is applied.

Supported commands:

 "#include": The value is the state to include.

Rules are literal regular expressions, or functions (beginning
with "#") applied to lists of strings in the "constants" map.

Regex literals can use Python-style raw notation, prefixed with
"r". Both single-quotes and double-quoted raw notations are
supported.

The second rule argument is the token type to apply to regex's
match, or an array of token types to apply to group matches, in
ordered sequence.

The optional third argument is the next state to switch to
after the rule is applied, or an array of states to combine and
switch to.

States can be either literal names of states, or the relative
references "#push" and "#pop" for the state stack. "#pop" can
also optionally specify a depth beyond one, for example:
"#pop:2".